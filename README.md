# k8s_final_task
Итоговое задание для курса **Kubernetes** от отраслевой **IT школы** Росатом.

**Задача:**  
Любое веб-приложение, которое использует базу данных для хранения данных. Базу данных желательно брать из кластерных (MongoDB, CockroachDB). Дополнительно установить в кластер Ingress Controller (любой на выбор, кроме ingress-nginx), создать объект Ingress для доступа к веб-приложению с 80 порта нод. Для хранения данных использовать Volume (emptyDir).

**Результат:**
1) Разработано небольшое веб-приложение на python-фреймворке **Flask**, которое генерирует случайное число и записывает его в **MongoDB**, при нажатии кнопки "**Добавить рандомное число**", а также очищает список сгенерированных значений после нажатия на "**Очистить список**"  Исходники приложения находятся в директории **app/**;
2) Добавлен и настроен **Ingress Controller - Traefik**. Контейнеры контроллера запускаются через объект **DaemonSet**. **Но**! Открыть доступ через 80 порт, мне не удалось =( Т.к. в целях безопастности использование 80 порта в создаваемых контейнеров Ingress Controller **запрещено**! Разрешено использовать все порты выше 1024. Я выбрал **8000**. Информация об этом есть тут:  
https://community.traefik.io/t/traefik-v2-unable-to-bind-port-80-in-k8s/6112/7
4) Созданы yaml манифесты для **Kubernetes** - расположены в директории **deploy/**

**Проблемы, с которыми пришлось столкнуться:**  
До применения **Traefik ingress controler**, была попытка использования **nginx-ingress**. По в процессе работы было выяснено, что параметры **spec.rules.host** в yaml манифесте объекта ingress являются обязательными, а параметры **spec.defaultBackend** игнорируются. В итоге открыть доступ до приложения удавалось только через **доменное имя**, по ip адресу нет.

**Требования к кластеру Kubernetes:**  
Kubernetes версии 1.31, доступ к Docker Hub.

**Установка:**

    kubectl apply -f deploy/

**Проверка:**  

    http://<адрес ноды>:8000
